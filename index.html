import React, { useState, useEffect } from 'react';
import { 
  Rocket, 
  Orbit, 
  Flame, 
  Target, 
  Layers, 
  Scale, 
  BookOpen, 
  Play, 
  Zap, 
  Star, 
  Download,
  ChevronDown
} from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';

const App = () => {
  const [ispData, setIspData] = useState({
    propellant: 'RP-1/LOX',
    isp: 311
  });
  const [tsiolData, setTsiolData] = useState({
    ve: 3000,
    m0: 1000,
    mf: 200
  });

  const propellants = [
    { name: 'RP-1/LOX', isp: 311, color: '#3b82f6' },
    { name: 'LH‚ÇÇ/LOX', isp: 450, color: '#10b981' },
    { name: 'Hiper-g√≥lico (NTO/MMH)', isp: 320, color: '#f59e0b' },
    { name: 'S√≥lido (HTPB)', isp: 270, color: '#ef4444' },
    { name: 'Propulsi√≥n i√≥nica', isp: 3000, color: '#8b5cf6' }
  ];

  const calculateDeltaV = () => {
    const { ve, m0, mf } = tsiolData;
    if (m0 <= mf || mf <= 0) return 0;
    return ve * Math.log(m0 / mf);
  };

  const orbits = [
    { name: 'LEO', height: '160‚Äì2,000 km', use: 'ISS, Starlink', color: '#60a5fa' },
    { name: 'MEO', height: '2,000‚Äì35,786 km', use: 'GPS, Galileo', color: '#34d399' },
    { name: 'GEO', height: '35,786 km', use: 'Comunicaciones', color: '#fbbf24' },
    { name: 'HEO', height: 'Altamente el√≠ptica', use: 'Observaci√≥n polar', color: '#f87171' },
  ];

  const rockets = [
    { name: 'Saturn V', type: 'L√≠quido', stages: 3, isp: 263 },
    { name: 'Space Shuttle', type: 'H√≠brido', stages: 2, isp: 455 },
    { name: 'Falcon 9', type: 'L√≠quido', stages: 2, isp: 311 },
    { name: 'SLS', type: 'S√≥lido + L√≠quido', stages: 2, isp: 268 },
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-blue-950 to-black text-white overflow-x-hidden">
      {/* Animated background stars */}
      <div className="fixed inset-0 overflow-hidden pointer-events-none">
        {[...Array(50)].map((_, i) => (
          <motion.div
            key={i}
            className="absolute rounded-full bg-white"
            style={{
              top: `${Math.random() * 100}%`,
              left: `${Math.random() * 100}%`,
              width: `${Math.random() * 3 + 1}px`,
              height: `${Math.random() * 3 + 1}px`,
            }}
            animate={{
              opacity: [0.2, 1, 0.2],
            }}
            transition={{
              duration: 3 + Math.random() * 4,
              repeat: Infinity,
              delay: Math.random() * 2,
            }}
          />
        ))}
      </div>

      {/* Hero Section */}
      <section className="relative pt-20 pb-16 px-4 sm:px-6 lg:px-8">
        <div className="max-w-6xl mx-auto text-center">
          <motion.div
            initial={{ opacity: 0, y: 30 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8 }}
          >
            <Rocket size={64} className="mx-auto text-blue-400 mb-6" />
            <h1 className="text-4xl md:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-300 to-cyan-400">
              Fundamentos de Propulsi√≥n y Veh√≠culos Espaciales
            </h1>
            <p className="text-xl text-gray-300 max-w-3xl mx-auto mb-8">
              Curso t√©cnico-profesional para futuros ingenieros espaciales. Domina los principios que impulsan la exploraci√≥n m√°s all√° de la atm√≥sfera.
            </p>
            <div className="flex flex-col sm:flex-row justify-center gap-4">
              <button className="px-8 py-3 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-full font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2">
                <Play size={20} /> Iniciar Curso
              </button>
              <button className="px-8 py-3 bg-gray-800 border border-gray-700 rounded-full font-semibold hover:bg-gray-700 transition-all flex items-center justify-center gap-2">
                <Download size={20} /> Descargar temario
              </button>
            </div>
          </motion.div>
        </div>
      </section>

      {/* Curriculum */}
      <section className="py-16 px-4 sm:px-6 lg:px-8">
        <div className="max-w-6xl mx-auto">
          <motion.h2 
            className="text-3xl font-bold text-center mb-12"
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
          >
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300">
              Temario del Curso
            </span>
          </motion.h2>

          <div className="grid md:grid-cols-2 gap-8">
            {[
              { icon: Rocket, title: "Introducci√≥n a cohetes y transbordadores", desc: "Historia, evoluci√≥n y casos emblem√°ticos: Saturn V, Space Shuttle, Falcon 9." },
              { icon: Orbit, title: "√ìrbitas terrestres y tipos", desc: "LEO, GEO, MEO, HEO: par√°metros, aplicaciones y din√°mica orbital." },
              { icon: Flame, title: "Clasificaci√≥n de propelentes", desc: "S√≥lidos, l√≠quidos, h√≠bridos y propulsi√≥n no qu√≠mica. Ventajas y limitaciones." },
              { icon: Target, title: "Sistema de transporte interplanetario", desc: "Transferencias de Hohmann, asistencia gravitacional y ventanas de lanzamiento." },
              { icon: Layers, title: "Ecuaci√≥n y etapas del cohete", desc: "Derivaci√≥n de Tsiolkovsky, vectorizaci√≥n por etapas y optimizaci√≥n de masa." },
              { icon: BookOpen, title: "Anatom√≠a de cohetes", desc: "Componentes clave: tanques, toberas, turbobombas y sistemas de control." },
              { icon: Scale, title: "Cohetes s√≥lidos, l√≠quidos e h√≠bridos", desc: "Comparaci√≥n t√©cnica y casos reales de desarrollo mexicano." },
              { icon: Zap, title: "Impulso espec√≠fico (Isp)", desc: "Definici√≥n f√≠sica, medici√≥n y su papel como m√©trica clave de eficiencia." },
            ].map((item, i) => (
              <motion.div
                key={i}
                className="bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6 hover:border-blue-500/50 transition-all"
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ delay: i * 0.1 }}
              >
                <item.icon size={32} className="text-blue-400 mb-4" />
                <h3 className="text-xl font-semibold mb-2">{item.title}</h3>
                <p className="text-gray-400">{item.desc}</p>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Talleres Interactivos */}
      <section className="py-16 px-4 sm:px-6 lg:px-8 bg-gray-900/50">
        <div className="max-w-6xl mx-auto">
          <motion.h2 
            className="text-3xl font-bold text-center mb-12"
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
          >
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-300">
              Talleres Interactivos
            </span>
          </motion.h2>

          {/* Simulador Tsiolkovsky */}
          <motion.div
            className="bg-gray-800/60 backdrop-blur border border-gray-700 rounded-2xl p-6 mb-12"
            initial={{ opacity: 0, scale: 0.95 }}
            whileInView={{ opacity: 1, scale: 1 }}
            viewport={{ once: true }}
          >
            <div className="flex items-center gap-3 mb-6">
              <Layers size={28} className="text-cyan-400" />
              <h3 className="text-2xl font-bold">Simulador: Ecuaci√≥n de Tsiolkovsky</h3>
            </div>
            <div className="grid md:grid-cols-2 gap-8">
              <div>
                <div className="space-y-4 mb-6">
                  <div>
                    <label className="block text-sm font-medium mb-1">Velocidad de escape efectiva (m/s)</label>
                    <input
                      type="range"
                      min="1000"
                      max="5000"
                      value={tsiolData.ve}
                      onChange={(e) => setTsiolData({...tsiolData, ve: Number(e.target.value)})}
                      className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                    />
                    <div className="flex justify-between text-xs text-gray-400 mt-1">
                      <span>1,000</span>
                      <span>{tsiolData.ve}</span>
                      <span>5,000</span>
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">Masa inicial (kg)</label>
                    <input
                      type="range"
                      min="500"
                      max="2000"
                      value={tsiolData.m0}
                      onChange={(e) => setTsiolData({...tsiolData, m0: Number(e.target.value)})}
                      className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                    />
                    <div className="flex justify-between text-xs text-gray-400 mt-1">
                      <span>500</span>
                      <span>{tsiolData.m0}</span>
                      <span>2,000</span>
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">Masa final (kg)</label>
                    <input
                      type="range"
                      min="100"
                      max="900"
                      value={tsiolData.mf}
                      onChange={(e) => setTsiolData({...tsiolData, mf: Number(e.target.value)})}
                      className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                    />
                    <div className="flex justify-between text-xs text-gray-400 mt-1">
                      <span>100</span>
                      <span>{tsiolData.mf}</span>
                      <span>900</span>
                    </div>
                  </div>
                </div>
                <div className="bg-blue-900/50 border border-blue-700 rounded-lg p-4">
                  <div className="text-2xl font-bold text-cyan-300">
                    Œîv = {calculateDeltaV().toFixed(0)} m/s
                  </div>
                  <div className="text-sm text-gray-400 mt-1">
                    Velocidad alcanzable con esta configuraci√≥n
                  </div>
                </div>
              </div>
              <div className="flex flex-col justify-center">
                <div className="bg-gray-900 rounded-xl p-6 h-full">
                  <h4 className="font-bold mb-3 text-blue-300">¬øC√≥mo funciona?</h4>
                  <p className="text-gray-300 text-sm">
                    La ecuaci√≥n de Tsiolkovsky: <code className="bg-gray-800 px-2 py-1 rounded">Œîv = v‚Çë ¬∑ ln(m‚ÇÄ/m_f)</code>
                  </p>
                  <ul className="mt-3 text-sm text-gray-400 space-y-1">
                    <li>‚Ä¢ <code>v‚Çë</code>: Velocidad de escape de los gases</li>
                    <li>‚Ä¢ <code>m‚ÇÄ</code>: Masa total inicial (cohete + propelente)</li>
                    <li>‚Ä¢ <code>m_f</code>: Masa final (solo estructura + carga √∫til)</li>
                  </ul>
                  <div className="mt-4 text-xs bg-yellow-900/30 border border-yellow-800 rounded px-3 py-2">
                    <strong>üí° Consejo:</strong> Para alcanzar √≥rbita (LEO), necesitas Œîv ‚âà 9,400 m/s. ¬°Ajusta los par√°metros!
                  </div>
                </div>
              </div>
            </div>
          </motion.div>

          {/* Comparador Isp */}
          <motion.div
            className="bg-gray-800/60 backdrop-blur border border-gray-700 rounded-2xl p-6"
            initial={{ opacity: 0, scale: 0.95 }}
            whileInView={{ opacity: 1, scale: 1 }}
            viewport={{ once: true }}
            transition={{ delay: 0.2 }}
          >
            <div className="flex items-center gap-3 mb-6">
              <Zap size={28} className="text-yellow-400" />
              <h3 className="text-2xl font-bold">Comparador de Impulso Espec√≠fico (Isp)</h3>
            </div>
            <div className="grid md:grid-cols-2 gap-8">
              <div>
                <div className="space-y-4">
                  {propellants.map((p, i) => (
                    <motion.button
                      key={i}
                      className={`w-full text-left p-4 rounded-lg border transition-all ${
                        ispData.propellant === p.name
                          ? 'border-yellow-500 bg-yellow-900/20'
                          : 'border-gray-700 hover:border-gray-600'
                      }`}
                      onClick={() => setIspData({ propellant: p.name, isp: p.isp })}
                      whileHover={{ scale: 1.02 }}
                      whileTap={{ scale: 0.98 }}
                    >
                      <div className="flex items-center gap-3">
                        <div 
                          className="w-3 h-3 rounded-full" 
                          style={{ backgroundColor: p.color }}
                        />
                        <span className="font-medium">{p.name}</span>
                        <span className="ml-auto font-bold text-yellow-400">{p.isp} s</span>
                      </div>
                    </motion.button>
                  ))}
                </div>
              </div>
              <div className="flex flex-col justify-center">
                <div className="bg-gray-900 rounded-xl p-6 h-full">
                  <div className="text-center">
                    <div className="text-5xl font-bold text-yellow-300 mb-2">
                      {ispData.isp} s
                    </div>
                    <div className="text-xl font-semibold mb-1">
                      {ispData.propellant}
                    </div>
                    <div className="h-4 bg-gray-700 rounded-full mt-4">
                      <motion.div 
                        className="h-full rounded-full bg-gradient-to-r from-yellow-500 to-orange-500"
                        initial={{ width: 0 }}
                        animate={{ width: `${(ispData.isp / 3000) * 100}%` }}
                        transition={{ duration: 0.8 }}
                      />
                    </div>
                    <div className="flex justify-between text-xs text-gray-500 mt-1">
                      <span>0 s</span>
                      <span>3,000 s</span>
                    </div>
                  </div>
                  <div className="mt-6 text-sm text-gray-400">
                    <p>
                      El <strong>impulso espec√≠fico (Isp)</strong> mide la eficiencia de un motor: 
                      cu√°ntos segundos puede 1 kg de propelente generar 1 kgf de empuje.
                    </p>
                    <p className="mt-2">
                      <span className="text-green-400">‚úì Mayor Isp</span> = m√°s eficiencia, pero no siempre m√°s empuje.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </motion.div>
        </div>
      </section>

      {/* Ejemplos pr√°cticos */}
      <section className="py-16 px-4 sm:px-6 lg:px-8">
        <div className="max-w-6xl mx-auto">
          <motion.h2 
            className="text-3xl font-bold text-center mb-12"
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
          >
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-400">
              Ejemplos y Casos Reales
            </span>
          </motion.h2>

          {/* √ìrbitas */}
          <motion.div
            className="mb-16"
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
          >
            <div className="flex items-center gap-3 mb-6">
              <Orbit size={28} className="text-green-400" />
              <h3 className="text-2xl font-bold">Tipos de √ìrbitas Terrestres</h3>
            </div>
            <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
              {orbits.map((orbit, i) => (
                <motion.div
                  key={i}
                  className="bg-gray-800/50 border border-gray-700 rounded-xl p-5 text-center"
                  whileHover={{ y: -5, borderColor: orbit.color }}
                  style={{ borderLeft: `4px solid ${orbit.color}` }}
                >
                  <div className="text-2xl font-bold mb-1" style={{ color: orbit.color }}>
                    {orbit.name}
                  </div>
                  <div className="text-sm text-gray-400 mb-2">{orbit.height}</div>
                  <div className="text-xs bg-gray-700/50 px-2 py-1 rounded inline-block">
                    {orbit.use}
                  </div>
                </motion.div>
              ))}
            </div>
          </motion.div>

          {/* Cohetes */}
          <motion.div
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
          >
            <div className="flex items-center gap-3 mb-6">
              <Rocket size={28} className="text-red-400" />
              <h3 className="text-2xl font-bold">Anatom√≠a de Cohetes Reales</h3>
            </div>
            <div className="grid md:grid-cols-2 gap-6">
              {rockets.map((r, i) => (
                <motion.div
                  key={i}
                  className="bg-gray-800/50 border border-gray-700 rounded-xl overflow-hidden"
                  initial={{ opacity: 0, y: 20 }}
                  whileInView={{ opacity: 1, y: 0 }}
                  viewport={{ once: true }}
                  transition={{ delay: i * 0.1 }}
                >
                  <div className="h-32 bg-gradient-to-r from-gray-900 to-gray-800 flex items-center justify-center">
                    <div className="text-4xl font-bold text-gray-600">{r.name.split(' ')[0]}</div>
                  </div>
                  <div className="p-5">
                    <div className="flex justify-between mb-2">
                      <span className="text-gray-400">Tipo:</span>
                      <span className="font-medium">{r.type}</span>
                    </div>
                    <div className="flex justify-between mb-2">
                      <span className="text-gray-400">Etapas:</span>
                      <span className="font-medium">{r.stages}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-400">Isp (vac√≠o):</span>
                      <span className="font-medium text-cyan-400">{r.isp} s</span>
                    </div>
                    <div className="mt-4 flex gap-2">
                      {[...Array(r.stages)].map((_, j) => (
                        <div 
                          key={j} 
                          className="h-2 flex-1 rounded-full bg-gradient-to-r from-blue-600 to-cyan-500"
                        />
                      ))}
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </motion.div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 px-4 sm:px-6 lg:px-8 border-t border-gray-800">
        <div className="max-w-6xl mx-auto text-center">
          <div className="flex justify-center mb-4">
            <Star size={32} className="text-yellow-400" />
          </div>
          <h3 className="text-2xl font-bold mb-2">¬øListo para despegar?</h3>
          <p className="text-gray-400 max-w-2xl mx-auto mb-8">
            √önete a la pr√≥xima cohorte del curso y convi√©rtete en parte de la nueva generaci√≥n de ingenieros espaciales mexicanos.
          </p>
          <button className="px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2 mx-auto">
            <Play size={20} /> Inscribirse ahora
          </button>
          <div className="mt-12 text-gray-500 text-sm">
            ¬© {new Date().getFullYear()} Fundamentos de Propulsi√≥n y Veh√≠culos Espaciales | 
            Dise√±ado para SPACE UPIICSA, ENMICE y la Cumbre Espacial Universitaria
          </div>
        </div>
      </footer>

      {/* Scroll indicator */}
      <motion.button
        className="fixed bottom-6 right-6 bg-blue-600 p-3 rounded-full shadow-lg"
        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
        whileHover={{ scale: 1.05 }}
        whileTap={{ scale: 0.95 }}
      >
        <ChevronDown size={24} className="rotate-180" />
      </motion.button>
    </div>
  );
};

export default App;
